!function(e,s){s(document).on("click",".club-install-theme",(function(e){e.preventDefault();var a=s(this),t=a.closest(".theme");if(!a.hasClass("disabled")&&!a.hasClass("updating-message")){var r=a.data("url"),n=a.data("slug");a.closest(".theme").find(".theme-install-error").remove(),t.addClass("installed"),a.addClass("disabled"),a.addClass("updating-message"),a.text("Installing..."),s.ajax({url:pixcare.wpRest.endpoint.installTheme.url,method:pixcare.wpRest.endpoint.installTheme.method,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",pixcare.wpRest.nonce)},data:{download_url:r,slug:n,pixcare_nonce:pixcare.wpRest.pixcare_nonce},success:function(e){if("success"===e.code)a.addClass("button-primary"),a.removeClass("disabled"),a.removeClass("club-install-theme"),a.removeClass("updating-message"),a.addClass("club-activate-theme"),a.text("Activate");else if(void 0!==e.data.errors&&void 0!==e.data.errors.errors){a.removeClass("disabled"),a.removeClass("updating-message"),a.text("Install"),t.removeClass("installed");let s="";switch(Object.keys(e.data.errors.errors)[0]){case"mkdir_failed_destination":s="The theme could not be installed. Please check if your current user has write permissions on the themes folder of your WordPress installation.";break;case"no_package":s=e.data.errors.errors.no_package;break;case"download_failed":s=e.data.errors.errors.download_failed;break;default:s="An unexpected error occurred. Please contact us at help@pixelgrade.com"}a.closest(".theme").find(".theme-screenshot").prepend('<div class="error theme-install-error">'+s+"</div>")}}})}})),s(document).on("click",".club-activate-theme",(function(a){a.preventDefault();var t=s(this),r=t.data("slug");s.ajax({url:pixcare.wpRest.endpoint.activateTheme.url,method:pixcare.wpRest.endpoint.activateTheme.method,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",pixcare.wpRest.nonce)},data:{slug:r,pixcare_nonce:pixcare.wpRest.pixcare_nonce},success:function(s){"success"===s.code?e.location.href=pixcare.themesUrl:t.closest(".theme").find(".theme-screenshot").prepend('<div class="error theme-install-error">'+s.message+"</div>")}})}))}(window,jQuery);